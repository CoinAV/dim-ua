/* ==========================================================================
–û–°–ù–û–í–ù–ò–ô –°–ö–†–ò–ü–¢ 21000.ONLINE
–í–∫–ª—é—á–∞—î: –ú–µ–Ω—é, –ì–∞–ª–µ—Ä–µ—é, –ú–æ–¥–∞–ª—å–Ω–µ —Ñ–æ—Ç–æ, –ü–æ—à—É–∫, –ê–Ω—ñ–º–∞—Ü—ñ—ó, –ö–æ–Ω—Ç–∞–∫—Ç–∏
========================================================================== */
let currentImg = 0;
function showImg(n) {
const imgs = document.querySelectorAll('.gallery-container img');
if (!imgs || imgs.length === 0) return;
if (imgs[currentImg]) imgs[currentImg].classList.remove('active');
currentImg = (n + imgs.length) % imgs.length;
if (imgs[currentImg]) imgs[currentImg].classList.add('active');
}
/* --------------------------------------------------------------------------
8. NEW: SETUP GALLERY NAVIGATION (Replaces onclick)
-------------------------------------------------------------------------- */
function initGalleryNavigation() {
const prevBtns = document.querySelectorAll('.nav-arrow.left');
const nextBtns = document.querySelectorAll('.nav-arrow.right');
const nextImage = () => showImg(currentImg + 1);
const prevImage = () => showImg(currentImg - 1);
nextBtns.forEach(btn => btn.addEventListener('click', (e) => {
e.preventDefault();
nextImage();
}));
prevBtns.forEach(btn => btn.addEventListener('click', (e) => {
e.preventDefault();
prevImage();
}));
window.galleryNext = nextImage;
window.galleryPrev = prevImage;
}
/* ==========================================================================
–Ü–ù–Ü–¶–Ü–ê–õ–Ü–ó–ê–¶–Ü–Ø –ü–Ü–°–õ–Ø –ó–ê–í–ê–ù–¢–ê–ñ–ï–ù–ù–Ø DOM
========================================================================== */
document.addEventListener("DOMContentLoaded", function () {
initNavigation();
initGallery();
initModalGallery();
initRevealAnimations();
initPhoneButtons();
initBlogSearch();       // –ü–æ—à—É–∫ –¥–ª—è –ë–ª–æ–≥—É
initRealEstateSearch(); // –ü–æ—à—É–∫ –¥–ª—è –ì–æ–ª–æ–≤–Ω–æ—ó (–ù–µ—Ä—É—Ö–æ–º—ñ—Å—Ç—å)
initCookieConsent();
});
/* --------------------------------------------------------------------------
–õ–û–ì–Ü–ö–ê –ü–û–®–£–ö–£ –ù–ï–†–£–•–û–ú–û–°–¢–Ü (–î–ª—è Index.html)
-------------------------------------------------------------------------- */
function initRealEstateSearch() {
const searchBtn = document.getElementById('btnRealEstateSearch');
const resetBtn = document.querySelector('#search-reset-block button'); // –ö–Ω–æ–ø–∫–∞ —Å–∫–∏–¥–∞–Ω–Ω—è
if (!searchBtn) return;
const performSearch = () => {
const searchRoomsEl = document.getElementById('searchRooms');
const searchPriceEl = document.getElementById('searchPrice');
const searchRooms = searchRoomsEl ? searchRoomsEl.value : '';
const searchPrice = searchPriceEl ? searchPriceEl.value : '';
const cards = document.querySelectorAll('.service-card');
const resetBlock = document.getElementById('search-reset-block');
let hasResults = false;
const isSearching = searchRooms !== '' || searchPrice !== '';
cards.forEach(card => {
const rooms = card.getAttribute('data-rooms');
const price = parseFloat(card.getAttribute('data-price'));
const isSold = card.classList.contains('sold');
let matchRooms = true;
let matchPrice = true;
if (searchRooms && rooms != searchRooms) matchRooms = false;
if (searchPrice && Number.isFinite(price) && price > Number(searchPrice)) matchPrice = false;
if (isSearching && isSold) {
matchRooms = false;
matchPrice = false;
}
if (matchRooms && matchPrice) {
card.classList.remove('hidden');
card.classList.add('visible');
card.style.display = 'block';
hasResults = true;
} else {
card.classList.remove('visible');
card.classList.add('hidden');
card.style.display = 'none'; // –ü–æ–≤–Ω–µ –ø—Ä–∏—Ö–æ–≤—É–≤–∞–Ω–Ω—è
}
});
const noResults = document.getElementById('no-results');
if (noResults) noResults.style.display = hasResults ? 'none' : 'block';
if (resetBlock) resetBlock.style.display = isSearching ? 'block' : 'none';
if (isSearching) {
const listingsSection = document.getElementById('listings');
if (listingsSection) listingsSection.scrollIntoView({ behavior: 'smooth' });
}
};
if (searchBtn) searchBtn.addEventListener('click', performSearch);
}
/* --------------------------------------------------------------------------
9. NEW: SEARCH RESET LOGIC (Replaces onclick)
-------------------------------------------------------------------------- */
function initSearchReset() {
const resetBtn = document.querySelector('#search-reset-block button');
if (resetBtn) {
resetBtn.addEventListener('click', function () {
const roomsInput = document.getElementById('searchRooms');
const priceInput = document.getElementById('searchPrice');
if (roomsInput) roomsInput.value = '';
if (priceInput) priceInput.value = '';
const searchBtn = document.getElementById('btnRealEstateSearch');
if (searchBtn) searchBtn.click();
});
}
}
/* --------------------------------------------------------------------------
10. NEW: IMAGE ERROR HANDLING (Replaces onerror)
-------------------------------------------------------------------------- */
function initImageErrorHandling() {
document.addEventListener('error', function (e) {
if (e.target.tagName.toLowerCase() === 'img') {
if (!e.target.src.includes('placehold.co')) {
e.target.src = 'https://placehold.co/600x400?text=No+Image';
e.target.alt = 'Image not found'; // Optional: update alt text
}
}
}, true); // useCapture = true
}
/* --------------------------------------------------------------------------
1. –ù–ê–í–Ü–ì–ê–¶–Ü–Ø (–ú–µ–Ω—é + –ê–∫—Ç–∏–≤–Ω–µ –ø–æ—Å–∏–ª–∞–Ω–Ω—è + ESC)
-------------------------------------------------------------------------- */
function initNavigation() {
const burger = document.querySelector('.burger');
const navLinks = document.querySelector('.nav-links');
const currentLocation = window.location.pathname;
const menuItems = document.querySelectorAll('.nav-links a');
menuItems.forEach(item => {
item.classList.remove('active');
const href = item.getAttribute('href');
if (
href === currentLocation ||
(currentLocation === '/' && href === '/') ||
item.href === window.location.href
) {
item.classList.add('active');
}
});
if (!burger || !navLinks) return;
const closeMenu = () => {
navLinks.classList.remove('active');
burger.setAttribute('aria-expanded', 'false');
};
burger.addEventListener('click', (e) => {
e.stopPropagation();
navLinks.classList.toggle('active');
const isExpanded = navLinks.classList.contains('active');
burger.setAttribute('aria-expanded', String(isExpanded));
});
document.addEventListener('click', (e) => {
if (!navLinks.classList.contains('active')) return;
if (!navLinks.contains(e.target) && !burger.contains(e.target)) closeMenu();
});
navLinks.querySelectorAll('a').forEach(link => {
link.addEventListener('click', () => closeMenu());
});
document.addEventListener('keydown', (e) => {
if (e.key === 'Escape' && navLinks.classList.contains('active')) closeMenu();
});
}
/* --------------------------------------------------------------------------
2. –ì–ê–õ–ï–†–ï–Ø (Swipe + Keyboard, —Ç—ñ–ª—å–∫–∏ –∫–æ–ª–∏ —î –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ)
-------------------------------------------------------------------------- */
function initGallery() {
const galleryContainer = document.querySelector('.gallery-container');
if (!galleryContainer) return;
if (!galleryContainer.hasAttribute('tabindex')) {
galleryContainer.setAttribute('tabindex', '0');
}
const imgs = document.querySelectorAll('.gallery-container img');
if (imgs.length > 0) {
const hasActive = Array.from(imgs).some(img => img.classList.contains('active'));
if (!hasActive) imgs[0].classList.add('active');
currentImg = Math.max(0, Array.from(imgs).findIndex(img => img.classList.contains('active')));
if (currentImg < 0) currentImg = 0;
}
let touchStartX = 0;
let touchEndX = 0;
galleryContainer.addEventListener('touchstart', (e) => {
touchStartX = e.changedTouches[0].screenX;
}, { passive: true });
galleryContainer.addEventListener('touchend', (e) => {
touchEndX = e.changedTouches[0].screenX;
const swipeThreshold = 50;
if (touchEndX < touchStartX - swipeThreshold) window.nextImage();
if (touchEndX > touchStartX + swipeThreshold) window.prevImage();
}, { passive: true });
galleryContainer.addEventListener('keydown', (e) => {
const modal = document.getElementById('imageModal');
const isModalOpen = modal && modal.style.display === 'block';
if (isModalOpen) return;
if (e.key === 'ArrowLeft') {
e.preventDefault();
window.prevImage();
}
if (e.key === 'ArrowRight') {
e.preventDefault();
window.nextImage();
}
});
}
/* --------------------------------------------------------------------------
3. –ú–û–î–ê–õ–¨–ù–ï –í–Ü–ö–ù–û –§–û–¢–û (Lightbox)
- –°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑—É—î—Ç—å—Å—è –∑ –≥–∞–ª–µ—Ä–µ—î—é: –ø—Ä–∏ –ø–µ—Ä–µ–º–∏–∫–∞–Ω–Ω—ñ –≤ –º–æ–¥–∞–ª—Ü—ñ –∑–º—ñ–Ω—é—î active —É –≥–∞–ª–µ—Ä–µ—ó.
-------------------------------------------------------------------------- */
function initModalGallery() {
const modal = document.getElementById('imageModal');
const modalImg = document.getElementById('modalImage');
const modalCaption = document.getElementById('modalCaption'); // <--- 1. –î–û–î–ê–ù–û: –ó–Ω–∞—Ö–æ–¥–∏–º–æ –µ–ª–µ–º–µ–Ω—Ç –ø—ñ–¥–ø–∏—Å—É
const closeBtn = document.querySelector('.close-modal');
if (!modal || !modalImg || !closeBtn) return;
modal.setAttribute('role', modal.getAttribute('role') || 'dialog');
modal.setAttribute('aria-modal', modal.getAttribute('aria-modal') || 'true');
modal.setAttribute('aria-hidden', modal.getAttribute('aria-hidden') || 'true');
const galleryImages = document.querySelectorAll('.gallery-container img');
if (!galleryImages || galleryImages.length === 0) return;
let currentIndex = 0;
let lastFocusedEl = null;
const openModal = (index) => {
lastFocusedEl = document.activeElement;
modal.style.display = 'block';
modal.setAttribute('aria-hidden', 'false');
document.body.style.overflow = 'hidden';
currentIndex = index;
syncToGalleryIndex(currentIndex);
updateModalImage();
closeBtn.focus?.();
};
const closeModal = () => {
modal.style.display = 'none';
modal.setAttribute('aria-hidden', 'true');
document.body.style.overflow = 'auto';
if (lastFocusedEl && typeof lastFocusedEl.focus === 'function') {
lastFocusedEl.focus();
}
};
const updateModalImage = () => {
const total = galleryImages.length;
if (total === 0) return;
if (currentIndex >= total) currentIndex = 0;
if (currentIndex < 0) currentIndex = total - 1;
modalImg.src = galleryImages[currentIndex].src;
const text = galleryImages[currentIndex].alt || '–§–æ—Ç–æ –æ–±‚Äô—î–∫—Ç–∞';
modalImg.alt = text;
if (modalCaption) {
modalCaption.textContent = text;
}
syncToGalleryIndex(currentIndex);
};
const syncToGalleryIndex = (index) => {
showImg(index);
};
galleryImages.forEach((img, index) => {
img.style.cursor = 'zoom-in';
img.addEventListener('click', () => openModal(index));
if (!img.hasAttribute('tabindex')) img.setAttribute('tabindex', '0');
img.addEventListener('keydown', (e) => {
if (e.key === 'Enter' || e.key === ' ') {
e.preventDefault();
openModal(index);
}
});
});
closeBtn.addEventListener('click', closeModal);
modal.addEventListener('click', (e) => {
if (e.target === modal) closeModal();
});
window.changeModalSlide = function (n) {
currentIndex += n;
updateModalImage();
};
const prevBtn = modal.querySelector('.modal-prev');
const nextBtn = modal.querySelector('.modal-next');
if (prevBtn) prevBtn.addEventListener('click', () => window.changeModalSlide(-1));
if (nextBtn) nextBtn.addEventListener('click', () => window.changeModalSlide(1));
let touchStartX = 0;
let touchEndX = 0;
modal.addEventListener('touchstart', function (e) {
touchStartX = e.changedTouches[0].screenX;
}, { passive: true });
modal.addEventListener('touchend', function (e) {
touchEndX = e.changedTouches[0].screenX;
const threshold = 50;
if (touchEndX < touchStartX - threshold) window.changeModalSlide(1);
if (touchEndX > touchStartX + threshold) window.changeModalSlide(-1);
}, { passive: true });
document.addEventListener('keydown', function (e) {
const isOpen = modal.style.display === 'block';
if (!isOpen) return;
if (e.key === 'Tab') {
const focusable = Array.from(modal.querySelectorAll(
'button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'
)).filter(el => !el.hasAttribute('disabled') && el.offsetParent !== null);
if (focusable.length > 0) {
const first = focusable[0];
const last = focusable[focusable.length - 1];
if (e.shiftKey && document.activeElement === first) {
e.preventDefault();
last.focus();
return;
}
if (!e.shiftKey && document.activeElement === last) {
e.preventDefault();
first.focus();
return;
}
}
}
if (e.key === 'Escape') {
e.preventDefault();
closeModal();
}
if (e.key === 'ArrowLeft') {
e.preventDefault();
window.changeModalSlide(-1);
}
if (e.key === 'ArrowRight') {
e.preventDefault();
window.changeModalSlide(1);
}
});
}
/* --------------------------------------------------------------------------
4. –ê–ù–Ü–ú–ê–¶–Ü–Ø –ü–û–Ø–í–ò (Intersection Observer)
-------------------------------------------------------------------------- */
function initRevealAnimations() {
const cards = document.querySelectorAll('.service-card');
if (cards.length === 0) return;
const observerOptions = { threshold: 0.1 };
const observer = new IntersectionObserver((entries) => {
entries.forEach(entry => {
if (entry.isIntersecting) {
entry.target.style.opacity = 1;
entry.target.style.transform = 'translateY(0)';
observer.unobserve(entry.target);
}
});
}, observerOptions);
cards.forEach(card => observer.observe(card));
}
/* --------------------------------------------------------------------------
5. –ö–ù–û–ü–ö–ò –¢–ï–õ–ï–§–û–ù–£ (–ü–æ–∫–∞–∑ –Ω–æ–º–µ—Ä–∞ –Ω–∞ Desktop)
-------------------------------------------------------------------------- */
function initPhoneButtons() {
const decodePhone = (encoded) => { try { return atob(encoded); } catch (e) { return ""; } };
const phoneDisplay = "(063) 388-98-56";
const phoneTel = decodePhone("KzM4MDYzMzg4OTg1Ng==");
const desktopCallBtn = document.getElementById('btn-call-desktop');
const mobileCallBtn = document.querySelector('.mf-call');
const orderCallBtn = document.getElementById('btn-order-call');
const callButtons = [desktopCallBtn, mobileCallBtn, orderCallBtn].filter(Boolean);
callButtons.forEach((btn) => {
const href = btn.getAttribute('href') || "";
const telFromHref = href.startsWith("tel:") ? href.replace("tel:", "").trim() : "";
const tel = (btn.dataset.phoneTel || telFromHref || phoneTel).trim();
if (!href.startsWith("tel:") && tel) {
btn.setAttribute("href", "tel:" + tel);
}
btn.dataset.revealed = btn.dataset.revealed || "0";
btn.dataset.phoneDisplay = btn.dataset.phoneDisplay || phoneDisplay;
btn.dataset.phoneTel = tel;
btn.addEventListener("click", (e) => {
const revealed = btn.dataset.revealed === "1";
if (!revealed) {
e.preventDefault(); // 1-–π –∫–ª—ñ–∫ ‚Äî –Ω–µ –¥–∑–≤–æ–Ω–∏–º–æ
btn.dataset.revealed = "1";
const display = btn.dataset.phoneDisplay || phoneDisplay;
btn.innerHTML = "<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="vertical-align: middle; margin-right: 5px;"><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path></svg> " + display;
btn.title = "–ù–∞—Ç–∏—Å–Ω—ñ—Ç—å —â–µ —Ä–∞–∑, —â–æ–± –ø–æ–¥–∑–≤–æ–Ω–∏—Ç–∏";
btn.style.backgroundColor = "#1A1A1A";
}
}, { passive: false });
});
}
/* --------------------------------------------------------------------------
6. –ü–û–®–£–ö –¢–ê –§–Ü–õ–¨–¢–†–ê–¶–Ü–Ø –ë–õ–û–ì–£ (–¢—ñ–ª—å–∫–∏ –¥–ª—è blog.html)
-------------------------------------------------------------------------- */
function initBlogSearch() {
const searchInput = document.getElementById('blogSearchInput');
if (!searchInput) return; // –Ø–∫—â–æ —ñ–Ω–ø—É—Ç—É –Ω–µ–º–∞—î, –∑—É–ø–∏–Ω—è—î–º–æ —Ñ—É–Ω–∫—Ü—ñ—é (—â–æ–± –Ω–µ –±—É–ª–æ –ø–æ–º–∏–ª–æ–∫ –Ω–∞ —ñ–Ω—à–∏—Ö —Å—Ç–æ—Ä—ñ–Ω–∫–∞—Ö)
const categoryBtns = document.querySelectorAll('.category-tag');
const blogCards = document.querySelectorAll('.blog-card');
const blogGrid = document.querySelector('.blog-grid');
let noResultsMsg = document.getElementById('blog-no-results');
if (!noResultsMsg && blogGrid) {
noResultsMsg = document.createElement('div');
noResultsMsg.id = 'blog-no-results'; // ID –¥–ª—è —É–Ω–∏–∫–Ω–µ–Ω–Ω—è –¥—É–±–ª—é–≤–∞–Ω–Ω—è
noResultsMsg.innerHTML = '<p style="text-align:center; width:100%; padding: 40px; color: #666; font-size: 1.1rem;">–ó–∞ –≤–∞—à–∏–º –∑–∞–ø–∏—Ç–æ–º –Ω—ñ—á–æ–≥–æ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ üòî</p>';
noResultsMsg.style.display = 'none';
blogGrid.appendChild(noResultsMsg);
}
function filterContent() {
const searchTerm = searchInput.value.toLowerCase().trim();
const activeBtn = document.querySelector('.category-tag.active');
const activeCategory = activeBtn ? activeBtn.getAttribute('data-category') : 'all';
let visibleCount = 0;
blogCards.forEach(card => {
const title = card.querySelector('h3')?.textContent.toLowerCase() || '';
const text = card.querySelector('p')?.textContent.toLowerCase() || '';
const cardCategory = card.getAttribute('data-category') || 'all';
const matchesSearch = title.includes(searchTerm) || text.includes(searchTerm);
const matchesCategory = activeCategory === 'all' || cardCategory === activeCategory;
if (matchesSearch && matchesCategory) {
card.style.display = 'block';
requestAnimationFrame(() => {
card.style.opacity = '1';
card.style.transform = 'translateY(0)';
});
visibleCount++;
} else {
card.style.display = 'none';
card.style.opacity = '0';
card.style.transform = 'translateY(10px)';
}
});
if (noResultsMsg) {
noResultsMsg.style.display = visibleCount === 0 ? 'block' : 'none';
}
}
searchInput.addEventListener('input', filterContent);
categoryBtns.forEach(btn => {
btn.addEventListener('click', function () {
categoryBtns.forEach(t => t.classList.remove('active'));
this.classList.add('active');
filterContent();
});
});
}
/* --------------------------------------------------------------------------
7. COOKIE CONSENT (–ó–≥–æ–¥–∞ –Ω–∞ –∫—É–∫—ñ)
-------------------------------------------------------------------------- */
function initCookieConsent() {
const banner = document.getElementById('cookie-banner');
const acceptBtn = document.getElementById('accept-cookies');
if (!banner || !acceptBtn) return;
if (!localStorage.getItem('cookieConsent')) {
setTimeout(() => {
banner.classList.add('show');
banner.setAttribute('aria-hidden', 'false');
}, 1500);
}
acceptBtn.addEventListener('click', () => {
localStorage.setItem('cookieConsent', 'true');
banner.classList.remove('show');
banner.setAttribute('aria-hidden', 'true');
});
}